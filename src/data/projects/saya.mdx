---
id: saya
title: Saya
description: Виджеты и окружение для Wayland-композиторов

status: wip

order: 0

stack:
    - Go
    - GTK3
    - gtk-layer-shell
---

import Ext from '@components/ExternalLink.astro'
import Picture from '@components/Picture.astro'
import Spoiler from '@components/Spoiler.astro'

import bar from '@assets/projects/saya/bar.webp'
import launch from '@assets/projects/saya/launch.webp'
import powermenu from '@assets/projects/saya/powermenu.webp'

# Saya

В данный момент я работаю над своим окружением рабочего стола для Linux, которое
работает с любым Wayland-композитором, поддерживающим протокол
<Ext href="https://wayland.app/protocols/wlr-layer-shell-unstable-v1">Layer Shell</Ext>.

Проект сильно вдохновлён
<Ext href="https://github.com/elkowar/eww">Eww</Ext> и
<Ext href="https://github.com/Fabric-Development/fabric">Fabric</Ext>.
Я хотел разобраться, как работают подобные системы, и в итоге решил написать
свою реализацию. Окружение всё ещё находится в активной разработке. Исходный
код, исполняемые файлы и документация будут доступны позже.

На данный момент реализованы следующие части окружения:

- **Меню питания** -- управление питанием
- **Док (dock)** -- меню, вдохновлённое macOS, с возможностью настройки
  пользовательских действий
- **Меню запуска** -- позволяет запускать приложения, искать в Интернете и
  выполнять многие другие действия при помощи поиска
- **Сервер уведомлений** -- реализация спецификации
  <Ext href="https://specifications.freedesktop.org/notification-spec/latest/">Desktop Notifications</Ext>
  для отображения уведомлений рабочего стола
- **Панель** -- располагается с краю экрана и отображает информацию о системе
- **Компоненты** -- среда исполнения пользовательских виджетов с поддержкой
  реактивности
- **Экран блокировки** -- блокирует Wayland-сессию и отображает информацию при
  помощи модулей
- **Менеджер дисплеев** -- экран входа в систему на основе
  <Ext href="https://sr.ht/~kennylevinsen/greetd/">`greetd`</Ext>

Все программы настраиваются в конфигурационных YAML-файлах, их внешний вид
можно кастомизировать при помощи CSS. Для _меню запуска_ и _компонентов_
используется встроенный скриптовый язык Tengo.

Помимо готовых частей окружения и компонентов, Saya предоставляет набор
библиотек (`libsaya`) для создания интегрированных приложений рабочего стола на
Go.

Откуда взялось название «Saya»? <Spoiler>Я назвал этот проект в честь своей кошки :)</Spoiler>

## Дополнительные библиотеки

В рамках работы над окружением я провел исследования механизмов взаимодействия
компонентов рабочего стола, существующих протоколов и спецификаций, и
разработал ряд библиотек. Они реализуют функционал, который может быть
использован и за пределами проекта. Ниже перечислены некоторые из них:

- <Ext href="https://github.com/shelepuginivan/gotk3-session-lock">`gotk3-session-lock`</Ext> --
  привязки (bindings) Go для библиотеки
  <Ext href="https://github.com/Cu3PO42/gtk-session-lock">`gtk-session-lock`</Ext>,
  которая реализует протокол
  <Ext href="https://wayland.app/protocols/ext-session-lock-v1">`ext-session-lock-v1`</Ext>
  в GTK

- <Ext href="https://github.com/shelepuginivan/systray">`systray`</Ext> --
  реализация спецификации
  <Ext href="https://www.freedesktop.org/wiki/Specifications/StatusNotifierItem/">StatusNotifierItem</Ext>,
  не зависящая от графических тулкитов

- <Ext href="https://github.com/shelepuginivan/gotk3-vte">`gotk3-vte`</Ext> --
  привязки Go для библиотеки <Ext href="https://gitlab.gnome.org/GNOME/vte/">VTE</Ext>,
  которая позволяет отображать виртуальные терминалы как виджеты GTK

## Демонстрация

Здесь представлены некоторые части окружения рабочего стола.

<Picture src={bar} alt="Панель">
    Панель (конфигурация и стили по умолчанию)
</Picture>

<Picture src={launch} alt="Меню запуска приложений">
    Меню запуска приложений (конфигурация и стили по умолчанию)
</Picture>

<Picture src={powermenu} alt="Меню питания">
    Меню питания (конфигурация и стили по умолчанию)
</Picture>
